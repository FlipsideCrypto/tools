# File managed by Terraform
# Contents will be overwritten automatically
# To make changes edit the original template in internal-organization

name: 'openvpn-kill'
description: 'Kill a running connection to an OpenVPN server'
inputs:
  openvpn-log:
    description: 'OpenVPN log file to upload'
    required: true

runs:
  using: 'composite'
  steps:
    - name: Kill VPN connection
      shell: bash
      run: |
        sudo chmod 777 ${{ inputs.openvpn-log }}
        sudo killall openvpn
    - name: Upload VPN logs
      uses: actions/upload-artifact@v2
      with:
        name: VPN logs
        path: ${{ inputs.openvpn-log }}

